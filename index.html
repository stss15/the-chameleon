<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>The Chameleon</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // Rusty Lake inspired sepia palette
            lounge: '#2C1810',      // Deep brown background
            loungeDark: '#1A0F0A',  // Darker brown
            parchment: '#D4C5A9',   // Aged paper
            parchmentDark: '#B8A888', // Darker parchment
            antiqueGold: '#B8860B', // Antique gold
            brass: '#8B6914',       // Brass accents
            rust: '#8B4513',        // Rusty brown
            shadow: '#3D2B1F',      // Shadow brown
          },
          fontFamily: {
            sans: ['Crimson Text', 'Georgia', 'serif'],
            serif: ['Playfair Display', 'Georgia', 'serif'],
            display: ['Playfair Display', 'Georgia', 'serif'],
          }
        }
      }
    }
  </script>
  <link
    href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Playfair+Display:wght@400;600;700;900&display=swap"
    rel="stylesheet">
  <style>
    /* Simple scrolling - no forced heights */
    html,
    body,
    #root {
      min-height: 100%;
    }

    body {
      background-color: #1A0F0A;
      color: #D4C5A9;
    }

    /* Safe area insets for iPhone notch/home indicator */
    .safe-area-inset-bottom {
      padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }

    .perspective-1000 {
      perspective: 1000px;
    }

    .rotate-y-180 {
      transform: rotateY(180deg);
    }

    .transform-style-3d {
      transform-style: preserve-3d;
    }

    .backface-hidden {
      backface-visibility: hidden;
    }

    /* Rusty Lake aged paper/parchment texture */
    .bg-texture {
      background-image:
        url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
    }

    /* Vignette overlay for mysterious atmosphere - fixed to viewport */
    .vignette::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      background: radial-gradient(ellipse at center, transparent 40%, rgba(0, 0, 0, 0.6) 100%);
      z-index: 0;
    }

    /* Card texture - aged parchment with vintage feel */
    .card-texture {
      background: linear-gradient(135deg, #D4C5A9 0%, #C4B599 50%, #B8A888 100%);
      box-shadow:
        0 4px 8px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2);
      border: 2px solid #8B6914;
      border-radius: 8px;
    }

    /* Vintage cigar lounge background */
    .bg-lounge {
      background:
        radial-gradient(ellipse at center, #2C1810 0%, #1A0F0A 100%);
    }

    /* Playing card style - aged vintage look */
    .playing-card {
      background: linear-gradient(145deg, #D4C5A9 0%, #C4B599 50%, #B8A888 100%);
      border: 2px solid #8B4513;
      border-radius: 6px;
      box-shadow:
        0 3px 6px rgba(0, 0, 0, 0.3),
        0 1px 0 rgba(255, 255, 255, 0.5) inset;
      position: relative;
    }

    .playing-card::before {
      content: '';
      position: absolute;
      inset: 4px;
      border: 1px solid rgba(139, 69, 19, 0.3);
      border-radius: 4px;
      pointer-events: none;
    }

    /* Antique gold embossed text effect */
    .text-embossed {
      color: #B8860B;
      text-shadow:
        0 1px 0 rgba(255, 255, 255, 0.2),
        0 -1px 0 rgba(0, 0, 0, 0.6);
    }

    /* Card flip animation */
    .card-flip {
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }

    .card-flip.flipped {
      transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
    }

    .card-back {
      transform: rotateY(180deg);
    }

    /* Animated glow effect for important elements - antique gold */
    @keyframes glow-pulse {

      0%,
      100% {
        box-shadow: 0 0 5px #B8860B, 0 0 10px rgba(184, 134, 11, 0.5);
      }

      50% {
        box-shadow: 0 0 10px #B8860B, 0 0 20px rgba(184, 134, 11, 0.8);
      }
    }

    .glow-gold {
      animation: glow-pulse 2s ease-in-out infinite;
    }

    /* Fade in animation */
    @keyframes fade-in {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .animate-fade-in {
      animation: fade-in 0.5s ease-out forwards;
    }

    /* Scale in animation */
    @keyframes scale-in {
      from {
        opacity: 0;
        transform: scale(0.8);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .animate-scale-in {
      animation: scale-in 0.5s ease-out forwards;
    }

    /* ========================================
       BOARD GAME ANIMATIONS
       ======================================== */

    /* 3D Card Flip Animation */
    .card-container {
      perspective: 1000px;
    }

    .card-flipper {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card-flipper.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
    }

    .card-back {
      background: linear-gradient(145deg, #3D2B1F 0%, #2C1810 100%);
      border: 2px solid #8B6914;
    }

    .card-front {
      transform: rotateY(180deg);
      background: linear-gradient(145deg, #D4C5A9 0%, #B8A888 100%);
      border: 2px solid #8B6914;
    }

    /* Turn Spotlight Effect */
    @keyframes spotlight {

      0%,
      100% {
        box-shadow: 0 0 20px 5px rgba(184, 134, 11, 0.3);
      }

      50% {
        box-shadow: 0 0 40px 10px rgba(184, 134, 11, 0.6);
      }
    }

    .spotlight-active {
      animation: spotlight 2s ease-in-out infinite;
    }

    /* Active Player Glow Ring */
    @keyframes active-player-glow {

      0%,
      100% {
        box-shadow: 0 0 0 0 rgba(184, 134, 11, 0.7);
      }

      50% {
        box-shadow: 0 0 0 12px rgba(184, 134, 11, 0);
      }
    }

    .active-player {
      animation: active-player-glow 1.5s ease-out infinite;
    }

    /* Slide-in Toast Notification */
    @keyframes slide-in-up {
      from {
        opacity: 0;
        transform: translateY(100%);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slide-out-down {
      from {
        opacity: 1;
        transform: translateY(0);
      }

      to {
        opacity: 0;
        transform: translateY(100%);
      }
    }

    .toast-enter {
      animation: slide-in-up 0.4s ease-out forwards;
    }

    .toast-exit {
      animation: slide-out-down 0.3s ease-in forwards;
    }

    /* Your Turn Pulse Banner */
    @keyframes your-turn-pulse {

      0%,
      100% {
        transform: scale(1);
        opacity: 1;
      }

      50% {
        transform: scale(1.02);
        opacity: 0.9;
      }
    }

    .your-turn-banner {
      animation: your-turn-pulse 1s ease-in-out infinite;
      background: linear-gradient(90deg, #B8860B, #D4AF37, #B8860B);
      background-size: 200% 100%;
    }

    /* Button Press Feedback */
    .btn-press {
      transition: all 0.15s ease;
    }

    .btn-press:active {
      transform: scale(0.95);
      filter: brightness(0.9);
    }

    /* Phase Transition Fade */
    @keyframes phase-fade {
      0% {
        opacity: 0;
        transform: scale(0.95);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .phase-enter {
      animation: phase-fade 0.5s ease-out forwards;
    }

    /* Dramatic Role Reveal */
    @keyframes role-reveal {
      0% {
        opacity: 0;
        transform: scale(0.5) rotateY(-90deg);
      }

      50% {
        opacity: 1;
        transform: scale(1.1) rotateY(0deg);
      }

      100% {
        transform: scale(1) rotateY(0deg);
      }
    }

    .role-reveal {
      animation: role-reveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    /* Word Grid Card Hover */
    .word-card {
      transition: all 0.2s ease;
    }

    .word-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }

    .word-card.secret-word {
      background: linear-gradient(145deg, #B8860B, #8B6914) !important;
      color: #1A0F0A !important;
    }

    /* Video chat styles (keeping existing) */
    .video-spotlight {
      backdrop-filter: blur(4px);
    }

    .video-tile {
      transition: all 0.3s ease;
    }

    .video-tile:hover {
      transform: scale(1.02);
    }

    /* Subtle pulse animation for speaking indicator */
    @keyframes pulse-subtle {

      0%,
      100% {
        opacity: 1;
        box-shadow: 0 0 0 0 rgba(184, 134, 11, 0.4);
      }

      50% {
        opacity: 0.9;
        box-shadow: 0 0 0 8px rgba(184, 134, 11, 0);
      }
    }

    .animate-pulse-subtle {
      animation: pulse-subtle 2s ease-in-out infinite;
    }

    /* Video controls transitions */
    .video-controls button {
      transition: all 0.2s ease;
    }

    .video-controls button:active {
      transform: scale(0.95);
    }

    /* Slide in from left animation */
    @keyframes slide-in-left {
      from {
        opacity: 0;
        transform: translateX(-100%);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .animate-slide-in-left {
      animation: slide-in-left 0.4s ease-out forwards;
    }

    /* Bounce in animation for modals */
    @keyframes bounce-in {
      0% {
        opacity: 0;
        transform: scale(0.3) translateY(-50px);
      }

      50% {
        opacity: 1;
        transform: scale(1.05);
      }

      70% {
        transform: scale(0.95);
      }

      100% {
        transform: scale(1);
      }
    }

    .animate-bounce-in {
      animation: bounce-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }
  </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "@google/genai": "https://esm.sh/@google/genai@^1.33.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "firebase/": "https://esm.sh/firebase@^12.6.0/"
  }
}
</script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
  <script>
    // Fix for mobile viewport height (iOS Safari address bar)
    function setVH() {
      let vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', vh + 'px');
    }
    setVH();
    window.addEventListener('resize', setVH);
    window.addEventListener('orientationchange', setVH);
  </script>
</body>

</html>